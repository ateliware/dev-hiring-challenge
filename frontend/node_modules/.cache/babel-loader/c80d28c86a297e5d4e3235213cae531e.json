{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Nader Farhat\\\\Dropbox\\\\PC\\\\Desktop\\\\Estudo\\\\dev-hiring-challenge\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\Nader Farhat\\\\Dropbox\\\\PC\\\\Desktop\\\\Estudo\\\\dev-hiring-challenge\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from\"react\";import mainLogo from\"../../assets/github-logo.png\";import{Select,Row,Col,Spin,Input}from\"antd\";import Card from\"../../components/Card/Card\";import ModalDetail from\"../../components/Modal/Modal\";import{Container}from\"./styles\";import axios from\"axios\";import{fetchRepositories}from\"../../services/integrationApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;var Home=function Home(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedLanguage=_useState2[0],setSelectedLanguage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),itemData=_useState6[0],setItemData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filteredData=_useState8[0],setFilteredData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),visibleModal=_useState12[0],setVisibleModal=_useState12[1];var handleFetchRepositories=function handleFetchRepositories(language){setLoading(true);setData([]);fetchRepositories(language).then(function(res){setData(res.data.items);setFilteredData(res.data.items);setLoading(false);}).catch(function(error){console.log(error);setLoading(false);});};var onChange=function onChange(e){setSelectedLanguage(e);handleFetchRepositories(e);};var handleOnChange=function handleOnChange(e){var keyword=e.target.value;if(keyword!==\"\"){var results=data.filter(function(item){return item.name.toLowerCase().startsWith(keyword.toLowerCase());});setFilteredData(results);}else{setFilteredData(data);}};useEffect(function(){handleFetchRepositories(selectedLanguage);},[selectedLanguage]);useEffect(function(){if(data.length>0){data.map(function(item){return axios({method:\"post\",url:\"/historic/create\",headers:{},data:{language:item.language,owner:item.owner.login,title:item.name,description:item.description}});});}},[data]);var handleCancel=function handleCancel(){setVisibleModal(false);};var handleOpenModal=function handleOpenModal(item){setItemData(item);setVisibleModal(true);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[visibleModal&&/*#__PURE__*/_jsx(ModalDetail,{isVisible:visibleModal,handleCancel:handleCancel,itemData:itemData}),/*#__PURE__*/_jsx(\"img\",{src:mainLogo,alt:\"fireSpot\",\"data-testid\":\"logo\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container_select\",children:/*#__PURE__*/_jsxs(Select,{placeholder:\"Select a language\",onChange:onChange,children:[/*#__PURE__*/_jsx(Option,{value:\"java\",children:\"Java\"}),/*#__PURE__*/_jsx(Option,{value:\"python\",children:\"Python\"}),/*#__PURE__*/_jsx(Option,{value:\"javascript\",children:\"Javascript\"}),/*#__PURE__*/_jsx(Option,{value:\"typescript\",children:\"Typescript\"}),/*#__PURE__*/_jsx(Option,{value:\"ruby\",children:\"Ruby\"})]})}),/*#__PURE__*/_jsx(Input,{placeholder:\"Search...\",className:\"input_search\",onChange:handleOnChange}),/*#__PURE__*/_jsx(\"div\",{className:\"list_repo\",\"data-testid\":\"list_repo\",children:!loading?/*#__PURE__*/_jsx(Row,{gutter:[24,24],className:\"row_list\",children:filteredData.map(function(item){return/*#__PURE__*/_jsx(Col,{xs:24,lg:12,onClick:function onClick(){handleOpenModal(item);},children:/*#__PURE__*/_jsx(Card,_objectSpread({},item))});})}):/*#__PURE__*/_jsx(Spin,{size:\"large\"})})]});};export default Home;","map":{"version":3,"sources":["C:/Users/Nader Farhat/Dropbox/PC/Desktop/Estudo/dev-hiring-challenge/frontend/src/pages/Home/Home.tsx"],"names":["React","useEffect","useState","mainLogo","Select","Row","Col","Spin","Input","Card","ModalDetail","Container","axios","fetchRepositories","Option","Home","selectedLanguage","setSelectedLanguage","data","setData","itemData","setItemData","filteredData","setFilteredData","loading","setLoading","visibleModal","setVisibleModal","handleFetchRepositories","language","then","res","items","catch","error","console","log","onChange","e","handleOnChange","keyword","target","value","results","filter","item","name","toLowerCase","startsWith","length","map","method","url","headers","owner","login","title","description","handleCancel","handleOpenModal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport mainLogo from \"../../assets/github-logo.png\";\r\nimport { Select, Row, Col, Spin, Input } from \"antd\";\r\nimport Card from \"../../components/Card/Card\";\r\nimport ModalDetail from \"../../components/Modal/Modal\";\r\nimport { Container } from \"./styles\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { fetchRepositories } from \"../../services/integrationApi\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst Home: React.FC = () => {\r\n  const [selectedLanguage, setSelectedLanguage] = useState<any>(null);\r\n  const [data, setData] = useState<any>([]);\r\n  const [itemData, setItemData] = useState<any>();\r\n  const [filteredData, setFilteredData] = useState<any>([]);\r\n  const [loading, setLoading] = useState<any>(false);\r\n  const [visibleModal, setVisibleModal] = useState<any>(false);\r\n\r\n  const handleFetchRepositories = (language: string) => {\r\n    setLoading(true);\r\n    setData([]);\r\n    fetchRepositories(language)\r\n      .then((res) => {\r\n        setData(res.data.items);\r\n        setFilteredData(res.data.items);\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const onChange = (e: string) => {\r\n    setSelectedLanguage(e);\r\n    handleFetchRepositories(e);\r\n  };\r\n\r\n  const handleOnChange = (e: any) => {\r\n    const keyword = e.target.value;\r\n\r\n    if (keyword !== \"\") {\r\n      const results = data.filter((item: any) => {\r\n        return item.name.toLowerCase().startsWith(keyword.toLowerCase());\r\n      });\r\n      setFilteredData(results);\r\n    } else {\r\n      setFilteredData(data);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleFetchRepositories(selectedLanguage);\r\n  }, [selectedLanguage]);\r\n\r\n  useEffect(() => {\r\n    if (data.length > 0) {\r\n      data.map((item: any) => {\r\n        return axios({\r\n          method: \"post\",\r\n          url: \"/historic/create\",\r\n          headers: {},\r\n          data: {\r\n            language: item.language,\r\n            owner: item.owner.login,\r\n            title: item.name,\r\n            description: item.description,\r\n          },\r\n        });\r\n      });\r\n    }\r\n  }, [data]);\r\n\r\n  const handleCancel = () => {\r\n    setVisibleModal(false);\r\n  };\r\n\r\n  const handleOpenModal = (item: any) => {\r\n    setItemData(item);\r\n    setVisibleModal(true);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <div>\r\n        {visibleModal && (\r\n          <ModalDetail\r\n            isVisible={visibleModal}\r\n            handleCancel={handleCancel}\r\n            itemData={itemData}\r\n          />\r\n        )}\r\n        <img src={mainLogo} alt=\"fireSpot\" data-testid=\"logo\" />\r\n      </div>\r\n      <div className=\"container_select\">\r\n        <Select placeholder=\"Select a language\" onChange={onChange}>\r\n          <Option value=\"java\">Java</Option>\r\n          <Option value=\"python\">Python</Option>\r\n          <Option value=\"javascript\">Javascript</Option>\r\n          <Option value=\"typescript\">Typescript</Option>\r\n          <Option value=\"ruby\">Ruby</Option>\r\n        </Select>\r\n      </div>\r\n\r\n      <Input\r\n        placeholder=\"Search...\"\r\n        className=\"input_search\"\r\n        onChange={handleOnChange}\r\n      ></Input>\r\n\r\n      <div className=\"list_repo\" data-testid=\"list_repo\">\r\n        {!loading ? (\r\n          <Row gutter={[24, 24]} className=\"row_list\">\r\n            {filteredData.map((item: any) => {\r\n              return (\r\n                <Col\r\n                  xs={24}\r\n                  lg={12}\r\n                  onClick={() => {\r\n                    handleOpenModal(item);\r\n                  }}\r\n                >\r\n                  <Card {...item} />\r\n                </Col>\r\n              );\r\n            })}\r\n          </Row>\r\n        ) : (\r\n          <Spin size=\"large\" />\r\n        )}\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}